- name: Create a directory if it does not exist
  ansible.builtin.file:
    path: /app
    state: directory

- name: Create roboshop system user
  ansible.builtin.user: 
    name: roboshop
    comment: "roboshop system user"
    shell: /sbin/nologin
    home: /app
    system: yes
    create_home: yes
  # after refering ansible documents got know about user module, refered examples
    # error while executed playbook error was about  system user (non-login, lower UID) then checked with chatgpt and resolve error and learnt about one more subject  system and create_user 

- name: download "{{ component }}" code
  ansible.builtin.get_url:
    url: https://roboshop-artifacts.s3.amazonaws.com/"{{ component }}"-v3.zip 
    dest: /tmp/"{{ component }}".zip

- name: extract "{{ component }}" code
  ansible.builtin.unarchive:
    src: /tmp/"{{ component }}".zip
    dest: /app
    remote_src: yes